<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>EBNF Grammar</title>
  <style>
    body { 
      margin: 0; padding: 0; 
      background-color: #f4f4f4; 
      font-family: Arial, sans-serif; 
      line-height: 1.6; 
    }
    h1 { 
      text-align: center; 
      color: #2c3e50;
      margin: 0; padding: 10px 0;
    }
    .grammar { 
      max-width: 900px; 
      margin: 0 auto; 
      padding: 10px; 
    }
    .rule { 
      background: #fff;
      border: 1px solid #ddd; 
      border-radius: 4px; 
      margin-bottom: 10px; 
      padding: 10px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    .rule code {
      display: block;
      font-family: "Courier New", monospace; 
      white-space: pre-wrap;
      word-break: break-word;
      margin: 0; padding: 0;
    }
    .rule a { 
      color: #3498db; 
      text-decoration: none; 
    }
    .rule a:hover { 
      text-decoration: underline; 
    }
    .rule-name { 
      color: #3498db; 
      cursor: pointer; 
    }
    .rule-name:hover { 
      text-decoration: underline; 
    }
    /* Dependency popup */
    #dependencyPopup {
      display: none;
      position: absolute;
      background: #fff;
      border: 2px solid #3498db;
      padding: 10px;
      border-radius: 4px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
      z-index: 1000;
      max-width: 400px;
      max-height: 300px;
      overflow-y: auto;
      word-wrap: break-word;
    }
    #dependencyPopup ul {
      list-style-type: none; padding-left: 0; margin: 0;
    }
    #dependencyPopup li { margin: 5px 0; }
    #dependencyPopup a { color: #3498db; }
    /* Preview tooltip */
    #previewPopup {
      display: none;
      position: absolute;
      background: #fff;
      border: 1px solid #aaa;
      border-radius: 3px;
      padding: 6px;
      max-width: 450px;
      max-height: 200px;
      overflow: hidden;
      pointer-events: none;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
      z-index: 2000;
    }
    #previewPopup code {
      font-family: "Courier New", monospace;
      white-space: pre-wrap;
      word-break: break-word;
      margin: 0; padding: 0;
    }
  </style>
</head>
<body>
  <h1>EBNF Grammar</h1>
  <div class="grammar">
    {{.RuleBlocks}}
  </div>
  <div id="dependencyPopup"></div>
  <div id="previewPopup"></div>
  <script>
    // Inject JSON data into the page.
    var dependents = {{.DependentsJSON}};
    var ruleContents = {{.ContentsJSON}};
  </script>
  <script>
    {{.ScriptJS}}
  </script>
</body>
</html>
